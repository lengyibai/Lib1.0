<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>数字自动增加</title>
  </head>
  <body>
    <p>
      <font size="5" id="time">0</font>
      <font size="5" color="orangered">%</font>
    </p>

    <script>
      const dom = document.querySelector("#time");
      class SmoothNum {
        count = 0;
        time;
        timer = null;

        constructor(time = 250) {
          this.time = time;
        }

        start(callback, num) {
          clearInterval(this.timer);

          let finalNum = num;
          let regulator = 10;
          let step = finalNum / (this.time / regulator);
          let initial = 0;

          this.timer = setInterval(() => {
            this.count = this.count + step;
            if (this.count >= finalNum) {
              clearInterval(this.timer);
              this.count = finalNum;
            }
            var t = Math.floor(this.count);
            if (t == initial) return;
            callback(t);
          }, 10);
        }
      }

      const smooth = new SmoothNum(1000);
      smooth.start((v) => {
        dom.innerHTML = v;
      }, 9999);
    </script>
  </body>
</html>
