(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{387:function(t,e,s){"use strict";function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return i}))},497:function(t,e,s){},746:function(t,e,s){t.exports=s.p+"assets/img/ball.dc3973ab.png"},747:function(t,e,s){t.exports=s.p+"assets/img/cock.098a8c83.png"},748:function(t,e,s){"use strict";s(497)},853:function(t,e,s){"use strict";s.r(e);var i=s(387),o={data:()=>({parabolic:null}),mounted(){const t=this.$refs.move,e=this.$refs.middle,s=this.$refs.right;this.parabolic=new class{constructor(t,e,s,o=10){Object(i.a)(this,"move",void 0),Object(i.a)(this,"middle",void 0),Object(i.a)(this,"right",void 0),Object(i.a)(this,"runing",void 0),Object(i.a)(this,"speed",void 0),Object(i.a)(this,"initX",void 0),Object(i.a)(this,"initY",void 0),this.move=t,this.middle=e,this.right=s,this.speed=o}getSolve(t,e,s){let i=t[0],o=t[1],n=e[0],r=e[1],a=s[0],l=s[1];return[((r-l)*(n-i)/(n-a)-(r-o))/((n*n-a*a)*(n-i)/(n-a)-(n*n-i*i)),((r-l)*(n*n-i*i)/(n*n-a*a)-(r-o))/((n-a)*(n*n-i*i)/(n*n-a*a)-(n-i)),((r*a-n*l)*(i*i*n-n*n*i)/(n*n*a-a*a*n)-(n*o-i*r))/((a-n)*(i*i*n-n*n*i)/(n*n*a-a*a*n)-(n-i))]}run(t){const e=t.target.getBoundingClientRect().x,s=t.target.getBoundingClientRect().y;return this.move.style.display="block",this.move.style.left=e+"px",this.move.style.top=s+"px",new Promise((t,e)=>{if(this.runing)return void e();this.runing=!0;const s=this.move,i=this.middle,o=this.right;var n=[s.offsetLeft,-s.offsetTop],r=[i.offsetLeft,-i.offsetTop],a=[o.offsetLeft,-o.offsetTop];const l=this.getSolve(n,r,a);(function e(){let i=s.offsetLeft+this.speed,o=l[0]*i*i+l[1]*i+l[2];if(s.style.left=i+"px",s.style.top=-o+"px",i>=a[0])return this.runing=!1,t(),this.move.style.transition="all 0.25s",this.move.style.opacity=0,void setTimeout(()=>{this.move.style.transition="all 0s",this.move.style.opacity=1,this.move.style.display="none"},250);requestAnimationFrame(e.bind(this))}).call(this)})}}(t,e,s)},methods:{run(t){this.parabolic.run(t).then(()=>{this.$refs.right.style.transition="all 0.25s",this.$refs.right.style.transform="rotate(360deg)",setTimeout(()=>{this.$refs.right.style.transition="all 0s",this.$refs.right.style.transform="rotate(0deg)"},250),console.log("结束")}).catch(()=>{console.warn("未结束")})}},directives:{downDrag:{inserted(t){t.style.cursor="move";let e=0,s=0,i=0,o=0,n=0,r=0;t.addEventListener("mousedown",a=>{function l(a){requestAnimationFrame((function(){n=a.pageX-e,r=a.pageY-s,t.style.left=n+i+"px",t.style.top=r+o+"px"}))}a.stopPropagation(),e=a.pageX,s=a.pageY,i=t.offsetLeft,o=t.offsetTop,window.addEventListener("mousemove",l),window.addEventListener("mouseup",()=>{window.removeEventListener("mousemove",l)})})}}}},n=(s(748),s(20)),r=Object(n.a)(o,(function(){var t=this._self._c;return t("div",{ref:"parent",staticClass:"demo"},[t("div",{staticClass:"run",on:{click:this.run}},[this._v("篮球和鸡")]),this._v(" "),t("img",{ref:"move",staticClass:"move",attrs:{src:s(746)}}),this._v(" "),t("div",{directives:[{name:"downDrag",rawName:"v-downDrag"}],ref:"middle",staticClass:"middle"},[this._v("拖拽设置顶点")]),this._v(" "),t("img",{ref:"right",staticClass:"right",attrs:{src:s(747)}})])}),[],!1,null,"b1bb938a",null);e.default=r.exports}}]);