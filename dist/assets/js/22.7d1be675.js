(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{387:function(t,e,s){"use strict";function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"a",(function(){return i}))},499:function(t,e,s){},758:function(t,e,s){t.exports=s.p+"assets/img/ball.dc3973ab.png"},759:function(t,e,s){t.exports=s.p+"assets/img/cock.098a8c83.png"},760:function(t,e,s){"use strict";s(499)},874:function(t,e,s){"use strict";s.r(e);var i=s(387),o={data:()=>({parabolic:null}),mounted(){const t=this.$refs.move,e=this.$refs.middle,s=this.$refs.right;this.parabolic=new class{constructor(t,e,s,o=20){Object(i.a)(this,"move",void 0),Object(i.a)(this,"middle",void 0),Object(i.a)(this,"right",void 0),Object(i.a)(this,"runing",void 0),Object(i.a)(this,"speed",void 0),Object(i.a)(this,"initX",void 0),Object(i.a)(this,"initY",void 0),this.move=t,this.middle=e,this.right=s,this.speed=o}getSolve(t,e,s){let i=t[0],o=t[1],n=e[0],r=e[1],a=s[0],l=s[1];return[((r-l)*(n-i)/(n-a)-(r-o))/((n*n-a*a)*(n-i)/(n-a)-(n*n-i*i)),((r-l)*(n*n-i*i)/(n*n-a*a)-(r-o))/((n-a)*(n*n-i*i)/(n*n-a*a)-(n-i)),((r*a-n*l)*(i*i*n-n*n*i)/(n*n*a-a*a*n)-(n*o-i*r))/((a-n)*(i*i*n-n*n*i)/(n*n*a-a*a*n)-(n-i))]}run(t){return new Promise((e,s)=>{if(this.runing)return void s();this.runing=!0;const i=t.target.getBoundingClientRect().x,o=t.target.getBoundingClientRect().y;this.move.style.display="block",this.move.style.left=i+"px",this.move.style.top=o+"px";const n=this.move,r=this.middle,a=this.right;var l=[n.offsetLeft,-n.offsetTop],c=[r.offsetLeft,-r.offsetTop],d=[a.offsetLeft,-a.offsetTop];const h=this.getSolve(l,c,d);(function t(){let s=n.offsetLeft+this.speed,i=h[0]*s*s+h[1]*s+h[2];if(n.style.left=s+"px",n.style.top=-i+"px",s>=d[0])return e(),this.move.style.transition="all 0.25s",this.move.style.opacity=0,void setTimeout(()=>{this.move.style.transition="all 0s",this.move.style.opacity=1,this.move.style.display="none",this.runing=!1},250);requestAnimationFrame(t.bind(this))}).call(this)})}}(t,e,s,10)},methods:{run(t){this.parabolic.run(t).then(()=>{this.$refs.right.style.transition="all 0.25s",this.$refs.right.style.transform="rotate(360deg)",setTimeout(()=>{this.$refs.right.style.transition="all 0s",this.$refs.right.style.transform="rotate(0deg)"},250),console.log("结束")}).catch(()=>{console.warn("未结束")})}},directives:{downDrag:{inserted(t){t.style.cursor="move";let e=0,s=0,i=0,o=0,n=0,r=0;t.addEventListener("mousedown",a=>{function l(a){requestAnimationFrame((function(){n=a.pageX-e,r=a.pageY-s,t.style.left=n+i+"px",t.style.top=r+o+"px"}))}a.stopPropagation(),e=a.pageX,s=a.pageY,i=t.offsetLeft,o=t.offsetTop,window.addEventListener("mousemove",l),window.addEventListener("mouseup",()=>{window.removeEventListener("mousemove",l)})})}}}},n=(s(760),s(20)),r=Object(n.a)(o,(function(){var t=this._self._c;return t("div",{ref:"parent",staticClass:"demo"},[t("div",{staticClass:"run",on:{click:this.run}},[this._v("篮球和鸡")]),this._v(" "),t("img",{ref:"move",staticClass:"move",attrs:{src:s(758)}}),this._v(" "),t("div",{directives:[{name:"downDrag",rawName:"v-downDrag"}],ref:"middle",staticClass:"middle"},[this._v("拖拽设置顶点")]),this._v(" "),t("img",{ref:"right",staticClass:"right",attrs:{src:s(759)}})])}),[],!1,null,"842b4ae4",null);e.default=r.exports}}]);